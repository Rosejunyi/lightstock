name: Daily-Stock-Data-Pipeline-SMART-SKIP

on:
  schedule:
    # æ”¹ä¸º UTC 9:30 = åŒ—äº¬æ—¶é—´ 17:30ï¼ˆç¡®ä¿æ•°æ®å·²æ›´æ–°ï¼‰
    - cron: '30 9 * * 1-5'
  workflow_dispatch:

jobs:
  stock-data-pipeline:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout ä»£ç 
        uses: actions/checkout@v3

      - name: è®¾ç½® Python ç¯å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
          cache: 'pip'

      - name: å®‰è£…ä¾èµ–
        run: |
          pip install baostock pandas pyarrow tqdm numpy ta-lib scikit-learn

      - name: é…ç½® SSH å’Œ rsync
        run: |
          sudo apt-get update
          sudo apt-get install -y rsync
          mkdir -p ~/.ssh
          echo "${{ secrets.SERVER_SSH_KEY }}" > ~/.ssh/id_rsa
          chmod 600 ~/.ssh/id_rsa
          ssh-keyscan -H ${{ secrets.SERVER_IP }} >> ~/.ssh/known_hosts

      # ========================================
      # âœ¨ æ™ºèƒ½æ£€æŸ¥ï¼šåˆ¤æ–­ä»Šå¤©æ˜¯å¦éœ€è¦æ›´æ–°æ•°æ®
      # ========================================
      - name: æ™ºèƒ½æ£€æŸ¥ - åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°
        id: smart_check
        run: |
          python3 << 'PYTHON_SCRIPT'
          from datetime import datetime
          import sys
          
          # è·å–å½“å‰æ—¶é—´ï¼ˆGitHub Actions ä½¿ç”¨ UTCï¼Œéœ€è¦è½¬æ¢ä¸ºåŒ—äº¬æ—¶é—´ UTC+8ï¼‰
          # æ³¨æ„ï¼šGitHub Actions è¿è¡Œç¯å¢ƒé»˜è®¤æ˜¯ UTC æ—¶åŒº
          import os
          os.environ['TZ'] = 'Asia/Shanghai'
          
          # å¦‚æœç³»ç»Ÿæ”¯æŒ tzsetï¼Œè°ƒç”¨å®ƒæ¥åº”ç”¨æ—¶åŒºè®¾ç½®
          try:
              import time
              time.tzset()
          except:
              pass
          
          today = datetime.now()
          weekday = today.weekday()
          current_hour = today.hour
          current_minute = today.minute
          current_time_minutes = current_hour * 60 + current_minute
          
          # è‚¡å¸‚æ•°æ®æ›´æ–°æ—¶é—´ï¼š16:30 = 990åˆ†é’Ÿ
          data_ready_time = 16 * 60 + 30  # 16:30
          
          print(f"ğŸ“… ä»Šå¤©: {today.strftime('%Y-%m-%d %H:%M')} ({['å‘¨ä¸€','å‘¨äºŒ','å‘¨ä¸‰','å‘¨å››','å‘¨äº”','å‘¨å…­','å‘¨æ—¥'][weekday]})")
          print(f"â° å½“å‰æ—¶é—´: {today.strftime('%H:%M')} (åŒ—äº¬æ—¶é—´)")
          print(f"ğŸ• æ•°æ®å°±ç»ªæ—¶é—´: 16:30")
          print()
          
          should_skip = False
          skip_reason = ""
          
          # åˆ¤æ–­1ï¼šæ˜¯å¦æ˜¯å‘¨æœ«
          if weekday >= 5:  # å‘¨å…­æˆ–å‘¨æ—¥
              should_skip = True
              skip_reason = "ä»Šå¤©æ˜¯å‘¨æœ«ï¼ˆéäº¤æ˜“æ—¥ï¼‰ï¼Œæ•°æ®åº”è¯¥å·²æ˜¯ä¸Šå‘¨äº”çš„"
              print(f"â­ï¸  {skip_reason}")
          
          # åˆ¤æ–­2ï¼šæ˜¯å¦åœ¨æ•°æ®æ›´æ–°æ—¶é—´ä¹‹å‰
          elif current_time_minutes < data_ready_time:
              should_skip = True
              skip_reason = f"å½“å‰æ—¶é—´ {today.strftime('%H:%M')} æ—©äºæ•°æ®æ›´æ–°æ—¶é—´ 16:30"
              print(f"â­ï¸  {skip_reason}")
              print()
              print(f"ğŸ’¡ æç¤º:")
              print(f"   - è‚¡å¸‚äº¤æ˜“æ—¶é—´: 09:30-15:00")
              print(f"   - æ•°æ®æ›´æ–°æ—¶é—´: é€šå¸¸åœ¨ 16:30-17:00 ä¹‹å")
              print(f"   - å½“å‰ cron: '30 8 * * 1-5' (UTC) = åŒ—äº¬æ—¶é—´ 16:30")
              print(f"   - å»ºè®® cron: '30 9 * * 1-5' (UTC) = åŒ—äº¬æ—¶é—´ 17:30")
          
          else:
              print("âœ… ä»Šå¤©æ˜¯å·¥ä½œæ—¥ï¼Œä¸”å·²è¿‡æ•°æ®æ›´æ–°æ—¶é—´")
              print("ğŸ“¥ å¯ä»¥å¼€å§‹ä¸‹è½½æœ€æ–°æ•°æ®")
          
          print()
          
          # å†™å…¥ç¯å¢ƒå˜é‡
          if should_skip:
              print(f"ğŸš« ç»“è®º: è·³è¿‡æ‰€æœ‰ä¸‹è½½æ­¥éª¤")
              print(f"ğŸ“‹ åŸå› : {skip_reason}")
              with open(os.environ['GITHUB_ENV'], 'a') as f:
                  f.write('SKIP_DOWNLOAD=true\n')
                  f.write(f'SKIP_REASON={skip_reason}\n')
          else:
              print(f"âœ… ç»“è®º: æ‰§è¡Œæ•°æ®ä¸‹è½½")
              with open(os.environ['GITHUB_ENV'], 'a') as f:
                  f.write('SKIP_DOWNLOAD=false\n')
                  f.write('SKIP_REASON=æ­£å¸¸æ‰§è¡Œ\n')
          PYTHON_SCRIPT

      - name: æ˜¾ç¤ºè·³è¿‡çŠ¶æ€
        run: |
          echo "=========================================="
          echo "æ™ºèƒ½è·³è¿‡æ£€æŸ¥ç»“æœ"
          echo "=========================================="
          echo "SKIP_DOWNLOAD = ${{ env.SKIP_DOWNLOAD }}"
          echo "SKIP_REASON = ${{ env.SKIP_REASON }}"
          echo ""
          
          if [ "${{ env.SKIP_DOWNLOAD }}" = "true" ]; then
            echo "â­ï¸  è·³è¿‡åŸå› : ${{ env.SKIP_REASON }}"
            echo ""
            echo "ğŸ’¡ æç¤ºï¼š"
            echo "  - å‘¨æœ«ï¼šæ•°æ®å·²æ˜¯ä¸Šå‘¨äº”çš„ï¼Œæ— éœ€é‡å¤ä¸‹è½½"
            echo "  - äº¤æ˜“æ—¥æ—©äº16:30ï¼šæ•°æ®å°šæœªæ›´æ–°å®Œæˆ"
            echo "  - å¦‚éœ€å¼ºåˆ¶æ›´æ–°ï¼šæ‰‹åŠ¨è§¦å‘ workflow_dispatch"
            echo ""
            echo "â° å»ºè®®æ‰§è¡Œæ—¶é—´ï¼š"
            echo "  - cron: '30 9 * * 1-5' (UTC)"
            echo "  - ç›¸å½“äºåŒ—äº¬æ—¶é—´ 17:30"
          else
            echo "âœ… å¼€å§‹æ‰§è¡Œæ•°æ®æ›´æ–°"
            echo ""
            echo "ğŸ“Š æ‰§è¡Œæ­¥éª¤ï¼š"
            echo "  S1: ä¸‹è½½ä¸ªè‚¡Kçº¿æ•°æ®"
            echo "  S2: ä¸‹è½½å¤æƒæ•°æ®"
            echo "  S3: ä¸‹è½½å¤§ç›˜æŒ‡æ•°"
            echo "  S4: è®¡ç®—æŠ€æœ¯æŒ‡æ ‡"
            echo "  S5: ç”Ÿæˆæ¯æ—¥å¿«ç…§"
            echo "  S6: å¼ºåŠ¿è‚¡ç­›é€‰"
            echo "  S7: å¸‚åœºèšåˆæ•°æ®"
            echo "  S8: å†·çƒ­åˆ†ç¦»"
            echo "  S9: è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ï¼ˆå‘¨ä¸€ï¼‰"
          fi
          echo "=========================================="

      # åˆ›å»ºä¸Šä¼ è„šæœ¬
      - name: åˆ›å»ºä¸Šä¼ è„šæœ¬
        if: env.SKIP_DOWNLOAD != 'true'
        run: |
          cat > upload_data.sh << 'EOF'
          #!/bin/bash
          DIR_NAME=$1
          REMOTE_PATH=$2
          
          if [ -d "$DIR_NAME" ] || [ -f "$DIR_NAME" ]; then
            echo "ğŸ“¤ ä¸Šä¼  $DIR_NAME..."
            rsync -avz --progress -e "ssh -i ~/.ssh/id_rsa -o StrictHostKeyChecking=no" \
              "$DIR_NAME" \
              root@${{ secrets.SERVER_IP }}:"$REMOTE_PATH"
            echo "âœ… $DIR_NAME ä¸Šä¼ å®Œæˆ"
          else
            echo "âš ï¸  $DIR_NAME ä¸å­˜åœ¨ï¼Œè·³è¿‡ä¸Šä¼ "
          fi
          EOF
          chmod +x upload_data.sh

      # ========================================
      # S1: ä¸‹è½½ä¸ªè‚¡ K çº¿æ•°æ®
      # ========================================
      - name: S1 - ä¸‹è½½ä¸ªè‚¡Kçº¿æ•°æ®ï¼ˆå¢é‡ï¼‰
        if: env.SKIP_DOWNLOAD != 'true'
        continue-on-error: true
        id: step_s1
        run: |
          echo "=========================================="
          echo "  S1: ä¸‹è½½ä¸ªè‚¡Kçº¿æ•°æ®ï¼ˆä¸å¤æƒï¼Œå¢é‡ï¼‰"
          echo "=========================================="
          python scripts/S1_20251103_download_kline_ä¸ªè‚¡å¢é‡.py

      - name: S1 - ç«‹å³ä¸Šä¼ æ•°æ®
        if: env.SKIP_DOWNLOAD != 'true' && steps.step_s1.outcome == 'success'
        run: |
          ssh -i ~/.ssh/id_rsa root@${{ secrets.SERVER_IP }} "mkdir -p /root/lightstock/data/daily_kline_raw"
          ./upload_data.sh "data/daily_kline_raw/" "/root/lightstock/data/daily_kline_raw/"

      # ========================================
      # S2: ä¸‹è½½å¤æƒæ•°æ®
      # ========================================
      - name: S2 - ä¸‹è½½å¤æƒæ•°æ®ï¼ˆå¢é‡ï¼‰
        if: env.SKIP_DOWNLOAD != 'true'
        continue-on-error: true
        id: step_s2
        run: |
          echo "=========================================="
          echo "  S2: ä¸‹è½½å¤æƒæ•°æ®ï¼ˆå‰å¤æƒ+åå¤æƒï¼Œå¢é‡ï¼‰"
          echo "=========================================="
          python scripts/S2_20251103_download_adjusted_å¤æƒå¢é‡.py

      - name: S2 - ç«‹å³ä¸Šä¼ æ•°æ®
        if: env.SKIP_DOWNLOAD != 'true' && steps.step_s2.outcome == 'success'
        run: |
          ssh -i ~/.ssh/id_rsa root@${{ secrets.SERVER_IP }} "mkdir -p /root/lightstock/data/{daily_parquet_qfq,daily_parquet_hfq}"
          ./upload_data.sh "data/daily_parquet_qfq/" "/root/lightstock/data/daily_parquet_qfq/"
          ./upload_data.sh "data/daily_parquet_hfq/" "/root/lightstock/data/daily_parquet_hfq/"

      # ========================================
      # S3: ä¸‹è½½å¤§ç›˜æŒ‡æ•°æ•°æ®
      # ========================================
      - name: S3 - ä¸‹è½½å¤§ç›˜æŒ‡æ•°æ•°æ®ï¼ˆå¢é‡ï¼‰
        if: env.SKIP_DOWNLOAD != 'true'
        continue-on-error: true
        id: step_s3
        run: |
          echo "=========================================="
          echo "  S3: ä¸‹è½½å¤§ç›˜æŒ‡æ•°æ•°æ®ï¼ˆå¢é‡ï¼‰"
          echo "=========================================="
          python scripts/S3_20251103_download_index_å¤§ç›˜å¢é‡.py

      - name: S3 - ç«‹å³ä¸Šä¼ æ•°æ®
        if: env.SKIP_DOWNLOAD != 'true' && steps.step_s3.outcome == 'success'
        run: |
          ssh -i ~/.ssh/id_rsa root@${{ secrets.SERVER_IP }} "mkdir -p /root/lightstock/data/index_data"
          ./upload_data.sh "data/index_data/" "/root/lightstock/data/index_data/"

      # ========================================
      # S4: è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
      # ========================================
      - name: S4 - è®¡ç®—æŠ€æœ¯æŒ‡æ ‡ï¼ˆå…¨é‡ï¼‰
        if: env.SKIP_DOWNLOAD != 'true'
        continue-on-error: true
        id: step_s4
        run: |
          echo "=========================================="
          echo "  S4: è®¡ç®—ä¸ªè‚¡åŠå¤§ç›˜æŠ€æœ¯æŒ‡æ ‡ï¼ˆå…¨é‡ï¼‰"
          echo "=========================================="
          python scripts/S4_20251102\ calculate_ä¸ªè‚¡åŠå¤§ç›˜æŠ€æœ¯å…¨é‡è®¡ç®—.py

      - name: S4 - ç«‹å³ä¸Šä¼ æ•°æ®
        if: env.SKIP_DOWNLOAD != 'true' && steps.step_s4.outcome == 'success'
        run: |
          ssh -i ~/.ssh/id_rsa root@${{ secrets.SERVER_IP }} "mkdir -p /root/lightstock/data/technical_indicators"
          ./upload_data.sh "data/technical_indicators/" "/root/lightstock/data/technical_indicators/"

      # ========================================
      # S5: ç”Ÿæˆæ¯æ—¥æŠ€æœ¯å¿«ç…§
      # ========================================
      - name: S5 - ç”Ÿæˆæ¯æ—¥æŠ€æœ¯å¿«ç…§
        if: env.SKIP_DOWNLOAD != 'true'
        continue-on-error: true
        id: step_s5
        run: |
          echo "=========================================="
          echo "  S5: ç”Ÿæˆä¸ªè‚¡æ¯æ—¥æŠ€æœ¯å¿«ç…§"
          echo "=========================================="
          python scripts/S5_20251103_generate_daily_ä¸ªè‚¡æ¯æ—¥æŠ€æœ¯å¿«ç…§.py

      - name: S5 - ç«‹å³ä¸Šä¼ æ•°æ®
        if: env.SKIP_DOWNLOAD != 'true' && steps.step_s5.outcome == 'success'
        run: |
          ssh -i ~/.ssh/id_rsa root@${{ secrets.SERVER_IP }} "mkdir -p /root/lightstock/data/daily_snapshot"
          ./upload_data.sh "data/daily_snapshot/" "/root/lightstock/data/daily_snapshot/"

      # ========================================
      # S6: åŸºç¡€å¼ºåŠ¿è‚¡ç­›é€‰
      # ========================================
      - name: S6 - åŸºç¡€å¼ºåŠ¿è‚¡ç­›é€‰
        if: env.SKIP_DOWNLOAD != 'true'
        continue-on-error: true
        id: step_s6
        run: |
          echo "=========================================="
          echo "  S6: åŸºç¡€å¼ºåŠ¿è‚¡ç­›é€‰ï¼ˆCANSLIMï¼‰"
          echo "=========================================="
          python scripts/S6_20251103_\ åŸºç¡€å¼ºåŠ¿è‚¡ç­›é€‰.py

      - name: S6 - ç«‹å³ä¸Šä¼ æ•°æ®
        if: env.SKIP_DOWNLOAD != 'true' && steps.step_s6.outcome == 'success'
        run: |
          ssh -i ~/.ssh/id_rsa root@${{ secrets.SERVER_IP }} "mkdir -p /root/lightstock/data/canslim_screening"
          ./upload_data.sh "data/canslim_screening/" "/root/lightstock/data/canslim_screening/"

      # ========================================
      # S7: ç”Ÿæˆå¸‚åœºèšåˆæ•°æ®
      # ========================================
      - name: S7 - ç”Ÿæˆå¸‚åœºèšåˆæ•°æ®
        if: env.SKIP_DOWNLOAD != 'true'
        continue-on-error: true
        id: step_s7
        run: |
          echo "=========================================="
          echo "  S7: ç”Ÿæˆå¸‚åœºèšåˆæ•°æ®"
          echo "=========================================="
          python scripts/S7_20251103_generate_marketå¸‚åœºèšåˆæ•°æ®.py

      - name: S7 - ç«‹å³ä¸Šä¼ æ•°æ®
        if: env.SKIP_DOWNLOAD != 'true' && steps.step_s7.outcome == 'success'
        run: |
          ssh -i ~/.ssh/id_rsa root@${{ secrets.SERVER_IP }} "mkdir -p /root/lightstock/data/market_aggregates"
          ./upload_data.sh "data/market_aggregates/" "/root/lightstock/data/market_aggregates/"

      # ========================================
      # S8: æŠ€æœ¯æŒ‡æ ‡å†·çƒ­åˆ†ç¦»
      # ========================================
      - name: S8 - æŠ€æœ¯æŒ‡æ ‡å†·çƒ­åˆ†ç¦»
        if: env.SKIP_DOWNLOAD != 'true'
        continue-on-error: true
        id: step_s8
        run: |
          echo "=========================================="
          echo "  S8: ä¸ªè‚¡æŠ€æœ¯æ•°æ®å†·çƒ­åˆ†ç¦»"
          echo "=========================================="
          python scripts/S8_20251103_split_hot_cold_ä¸ªè‚¡æŠ€æœ¯å†·çƒ­åˆ†ç¦».py

      - name: S8 - ç«‹å³ä¸Šä¼ æ•°æ®
        if: env.SKIP_DOWNLOAD != 'true' && steps.step_s8.outcome == 'success'
        run: |
          ssh -i ~/.ssh/id_rsa root@${{ secrets.SERVER_IP }} "mkdir -p /root/lightstock/data/technical_indicators_hot"
          ./upload_data.sh "data/technical_indicators_hot/" "/root/lightstock/data/technical_indicators_hot/"

      # ========================================
      # S9: ä¸‹è½½è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ï¼ˆå‘¨æ›´ï¼‰
      # ========================================
      - name: S9 - ä¸‹è½½è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ï¼ˆå‘¨æ›´ï¼‰
        continue-on-error: true
        id: step_s9
        run: |
          echo "=========================================="
          echo "  S9: ä¸‹è½½è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ï¼ˆå¢é‡ï¼Œå‘¨æ›´ï¼‰"
          echo "=========================================="
          # åªåœ¨å‘¨ä¸€æ‰§è¡Œ
          if [ $(date +%u) -eq 1 ]; then
            python scripts/S9_20251102\ download_å¢é‡è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯_å‘¨æ›´.py
          else
            echo "â­ï¸  ä»Šå¤©ä¸æ˜¯å‘¨ä¸€ï¼Œè·³è¿‡ S9"
          fi

      - name: S9 - ç«‹å³ä¸Šä¼ æ•°æ®
        if: steps.step_s9.outcome == 'success'
        run: |
          ssh -i ~/.ssh/id_rsa root@${{ secrets.SERVER_IP }} "mkdir -p /root/lightstock/data"
          ./upload_data.sh "data/stock_basic_info.parquet" "/root/lightstock/data/"

      # ========================================
      # ç”Ÿæˆæ‰§è¡ŒæŠ¥å‘Š
      # ========================================
      - name: ç”Ÿæˆæ‰§è¡ŒæŠ¥å‘Š
        if: always()
        run: |
          echo "=========================================="
          echo "  ğŸ“‹ Pipeline æ‰§è¡ŒæŠ¥å‘Š"
          echo "=========================================="
          echo "æ‰§è¡Œæ—¶é—´: $(date '+%Y-%m-%d %H:%M:%S')"
          echo "æ‰§è¡Œåˆ†æ”¯: ${{ github.ref_name }}"
          echo "è§¦å‘æ–¹å¼: ${{ github.event_name }}"
          echo ""
          
          if [ "${{ env.SKIP_DOWNLOAD }}" = "true" ]; then
            echo "â­ï¸  æ‰€æœ‰ä¸‹è½½æ­¥éª¤å·²è·³è¿‡"
            echo "ğŸ“‹ è·³è¿‡åŸå› : ${{ env.SKIP_REASON }}"
            echo ""
            echo "ğŸ’¡ æ•°æ®çŠ¶æ€:"
            if [[ "${{ env.SKIP_REASON }}" == *"å‘¨æœ«"* ]]; then
              echo "  - ä»Šå¤©æ˜¯å‘¨æœ«ï¼Œæ•°æ®å·²æ˜¯ä¸Šå‘¨äº”çš„"
              echo "  - æ— éœ€é‡å¤ä¸‹è½½"
            else
              echo "  - å½“å‰æ—¶é—´æ—©äºæ•°æ®æ›´æ–°æ—¶é—´ï¼ˆ16:30ï¼‰"
              echo "  - å»ºè®®ç­‰åˆ° 17:30 ä¹‹åå†æ‰§è¡Œ"
              echo "  - æˆ–ä¿®æ”¹ cron ä¸º '30 9 * * 1-5' (UTC)"
            fi
            echo "  - å¦‚éœ€å¼ºåˆ¶æ›´æ–°ï¼Œè¯·æ‰‹åŠ¨è§¦å‘ workflow_dispatch"
          else
            echo "å„æ­¥éª¤æ‰§è¡ŒçŠ¶æ€ï¼š"
            echo "  S1 (ä¸ªè‚¡Kçº¿): ${{ steps.step_s1.outcome }}"
            echo "  S2 (å¤æƒæ•°æ®): ${{ steps.step_s2.outcome }}"
            echo "  S3 (å¤§ç›˜æŒ‡æ•°): ${{ steps.step_s3.outcome }}"
            echo "  S4 (æŠ€æœ¯æŒ‡æ ‡): ${{ steps.step_s4.outcome }}"
            echo "  S5 (æ¯æ—¥å¿«ç…§): ${{ steps.step_s5.outcome }}"
            echo "  S6 (å¼ºåŠ¿è‚¡ç­›é€‰): ${{ steps.step_s6.outcome }}"
            echo "  S7 (å¸‚åœºèšåˆ): ${{ steps.step_s7.outcome }}"
            echo "  S8 (å†·çƒ­åˆ†ç¦»): ${{ steps.step_s8.outcome }}"
            echo "  S9 (è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯): ${{ steps.step_s9.outcome }}"
            
            # ç»Ÿè®¡
            SUCCESS=0
            FAIL=0
            SKIP=0
            
            for outcome in "${{ steps.step_s1.outcome }}" "${{ steps.step_s2.outcome }}" "${{ steps.step_s3.outcome }}" "${{ steps.step_s4.outcome }}" "${{ steps.step_s5.outcome }}" "${{ steps.step_s6.outcome }}" "${{ steps.step_s7.outcome }}" "${{ steps.step_s8.outcome }}" "${{ steps.step_s9.outcome }}"; do
              if [ "$outcome" = "success" ]; then
                SUCCESS=$((SUCCESS + 1))
              elif [ "$outcome" = "failure" ]; then
                FAIL=$((FAIL + 1))
              elif [ "$outcome" = "skipped" ]; then
                SKIP=$((SKIP + 1))
              fi
            done
            
            echo ""
            echo "âœ… æˆåŠŸ: $SUCCESS ä¸ªæ­¥éª¤"
            echo "âŒ å¤±è´¥: $FAIL ä¸ªæ­¥éª¤"
            echo "â­ï¸  è·³è¿‡: $SKIP ä¸ªæ­¥éª¤"
          fi
          echo "=========================================="
